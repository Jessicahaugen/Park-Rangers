<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./views/itinerary.css" />
    <title>Itenerary</title>
  </head>
  <body>
    <div class="main-container">
      ${Object.entries(objectOfTrips).map(([tripName,trips]) => `
      <div class="trip-container">
        <h3>${tripName}</h3>
        <h4>Start Date: ${trips[0].startDate}</h4>
        <h4>End Date: ${trips[0].endDate}</h4>
        <div class="small-trip-card">
          ${trips.map(trip =>`
          <h3>Park Name: ${trip.Parks.parkName}</h3>
          <form action="/delete-park/${trip.Parks.id}" method="POST">
            <input type="hidden" name="parkId" value="${trip.Parks.id}" />
            <button type="submit">Delete From Trip</button>
          </form>
          `).join("")} <br />
        </div>
        <form action="/delete-trip/${tripName}" method="POST">
          <button type="submit">Delete Trip</button>
        </form>
        <form action="/edit-trip/${tripName}" method="POST" id="editForm">
          <input
            style="display: none"
            type="hidden"
            name="tripName"
            value="${tripName}"
          />
          <button type="button" onclick="displayInput()">Edit Trip</button>
          <input
            type="text"
            id="new-name"
            name="newTripName"
            value="${tripName}"
            style="display: none"
          />
          <button type="submit" id="edit-trip-button" style="display: none">
            Submit Changes
          </button>
        </form>
        `).join("")}
      </div>
    </div>
  </body>
  <script>
    const displayInput = () => {
      const editButton = document.querySelector("#edit-trip-button");
      const inputField = document.querySelector("#new-name");
      const editForm = document.querySelector("#editForm");
      if (inputField.style.display === "none") {
        inputField.style.display = "block";
        editButton.style.display = "block";
      } else {
        inputField.style.display = "none";
        editButton.style.display = "none";
      }
    };
  </script>
</html>
